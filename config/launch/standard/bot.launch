#!/usr/bin/env -S goby_launch -L -P -d 1000

#[kill=SIGTERM] gpsd $(../../gen/bot.py gpsd)

# start the Goby processes
gobyd <(../../gen/bot.py gobyd) -zzz
[env=GOBY_MOOS_GATEWAY_PLUGINS=libgoby_ivp_frontseat_moos_gateway_plugin.so:libjaiabot_moos_gateway_plugin.so] goby_moos_gateway <(../../gen/bot.py goby_moos_gateway)
goby_liaison_jaiabot <(../../gen/bot.py goby_liaison)
jaiabot_mission_manager <(../../gen/bot.py jaiabot_mission_manager) -v -n

# IMU sensor
~/jaiabot/src/python/adafruit_BNO055/imu.py 20000
jaiabot_adafruit_BNO055_driver <(../../gen/bot.py jaiabot_adafruit_BNO055_driver)

# Pressure sensor
~/jaiabot/src/python/pressure_sensor/pressure_sensor.py
jaiabot_bluerobotics_pressure_sensor_driver <(../../gen/bot.py jaiabot_bluerobotics_pressure_sensor_driver)

# Salinity sensor
~/jaiabot/src/python/atlas_scientific_ezo_ec/as-ezo-ec.py 20002
jaiabot_atlas_scientific_ezo_ec_driver <(../../gen/bot.py jaiabot_atlas_scientific_ezo_ec_driver) -vv

# Sensor fusion
jaiabot_fusion <(../../gen/bot.py jaiabot_fusion) -vv

goby_gps <(../../gen/bot.py goby_gps)
goby_logger <(../../gen/bot.py goby_logger)
jaiabot_control_surfaces_driver <(../../gen/bot.py jaiabot_control_surfaces_driver) -vvv

jaiabot_pid_control <(../../gen/bot.py jaiabot_pid_control)

# vehicle MOOS components
[kill=SIGTERM] ../../gen/moos_gen.sh
[kill=SIGTERM] MOOSDB /tmp/jaiabot_${jaia_bot_index}.moos
[kill=SIGTERM] pHelmIvP /tmp/jaiabot_${jaia_bot_index}.moos
#[kill=SIGTERM] pMarineViewer /tmp/jaiabot_pmv_${jaia_bot_index}.moos
[kill=SIGTERM] uProcessWatch /tmp/jaiabot_${jaia_bot_index}.moos
[kill=SIGTERM] pNodeReporter /tmp/jaiabot_${jaia_bot_index}.moos
