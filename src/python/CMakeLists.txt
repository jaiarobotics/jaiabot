file(COPY ${CMAKE_CURRENT_SOURCE_DIR}/adafruit_BNO055/adafruit_bno055.py DESTINATION ${project_SHARE_DIR}/jaiabot/python/adafruit_BNO055)
file(COPY ${CMAKE_CURRENT_SOURCE_DIR}/adafruit_BNO055/jaiabot_imu.py DESTINATION ${project_SHARE_DIR}/jaiabot/python/adafruit_BNO055)
file(COPY ${CMAKE_CURRENT_SOURCE_DIR}/arduino DESTINATION ${project_SHARE_DIR}/jaiabot/python/arduino)
file(COPY ${CMAKE_CURRENT_SOURCE_DIR}/atlas_scientific_ezo_ec DESTINATION ${project_SHARE_DIR}/jaiabot/python/atlas_scientific_ezo_ec)
file(COPY ${CMAKE_CURRENT_SOURCE_DIR}/gps DESTINATION ${project_SHARE_DIR}/jaiabot/python/gps)
file(COPY ${CMAKE_CURRENT_SOURCE_DIR}/h5size DESTINATION ${project_SHARE_DIR}/jaiabot/python/h5size)
file(COPY ${CMAKE_CURRENT_SOURCE_DIR}/led_button DESTINATION ${project_SHARE_DIR}/jaiabot/python/led_button)
file(COPY ${CMAKE_CURRENT_SOURCE_DIR}/pressure_sensor DESTINATION ${project_SHARE_DIR}/jaiabot/python/pressure_sensor)
file(COPY ${CMAKE_CURRENT_SOURCE_DIR}/xbee DESTINATION ${project_SHARE_DIR}/jaiabot/python/xbee)
file(COPY ${CMAKE_CURRENT_SOURCE_DIR}/requirements.txt DESTINATION ${project_SHARE_DIR}/jaiabot/python/)

set(adafruit_BNO055_outdir ${project_SHARE_DIR}/jaiabot/python/adafruit_BNO055)
add_custom_command(OUTPUT ${adafruit_BNO055_outdir}/dccl/option_extensions_pb2.py
  COMMAND ./build_messages.sh
  ARGS ${adafruit_BNO055_outdir} ${CMAKE_CURRENT_BINARY_DIR}/proto_include ${GOBY_INCLUDE_DIR} ${DCCL_INCLUDE_DIR}
  WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/adafruit_BNO055
  COMMENT "Running adafruit_BNO055 build_messages.sh"
  )
add_custom_target(adafruit_BNO055_messages
  ALL
  DEPENDS ${adafruit_BNO055_outdir}/dccl/option_extensions_pb2.py jaiabot_messages
  )

install(DIRECTORY ${project_SHARE_DIR}/jaiabot/python DESTINATION share/jaiabot USE_SOURCE_PERMISSIONS)